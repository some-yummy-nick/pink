function init(e){myMap=new e.Map("mymap",{center:[59.93049120227639,30.348894999999978],zoom:14,controls:["zoomControl"]});var t=new e.Placemark([59.93049120227639,30.348894999999978],{hintContent:"Невский проспект"},{iconImageHref:"../img/map-marker.svg",iconImageSize:[36,36],iconImageOffset:[-3,-36]});myMap.geoObjects.add(t),myMap.controls.add("zoomControl")}!function(){"use strict";function e(e,t){var n=new XMLHttpRequest,r=(new Date).getTime();n.open("post","https://echo.htmlacademy.ru/adaptive?"+r),n.addEventListener("readystatechange",function(){4==n.readyState&&t(n.responseText)}),n.send(e)}function t(e){var t=new FileReader;t.addEventListener("load",function(t){var r=Mustache.render(u,{image:t.target.result,name:e.name}),o=document.createElement("li");o.classList.add("upload-images__item"),o.innerHTML=r,c.appendChild(o),o.querySelector(".upload-images__del-link").addEventListener("click",function(e){e.preventDefault(),n(o)}),s.push({file:e,li:o})}),t.readAsDataURL(e)}function n(e){s=s.filter(function(t){return t.li!=e}),e.parentNode.removeChild(e)}function r(e){function t(e){var t=Number(n.value);isNaN(t)&&(t=0),e?(n.value=t+1,o.classList.contains("second")&&i()):(n.value=t>2?t-1:1,"undefined"!=typeof document.querySelectorAll(".username__item")[n.value]&&o.classList.contains("second")&&document.querySelectorAll(".username__item")[n.value].remove())}var n=e.querySelector("input"),r=e.querySelector(".form-counter__btn--minus"),o=e.querySelector(".form-counter__btn--plus");r.addEventListener("click",function(e){e.preventDefault(),t(!1)}),o.addEventListener("click",function(e){e.preventDefault(),t(!0)})}function o(){this.parentNode.remove();var e=document.querySelectorAll(".username__item").length;document.querySelector("#counterUsers").value=e}function i(){var e=Mustache.render(p),t=document.createElement("li");t.classList.add("username__item"),t.innerHTML=e,l.appendChild(t),t.querySelector(".username__remove").addEventListener("click",o)}if("FormData"in window&&"FileReader"in window){var a=document.querySelector(".form"),s=[];if(a)var c=a.querySelector(".upload-images__list"),u=document.querySelector("#image-template").innerHTML,l=a.querySelector(".username"),p=document.querySelector("#username-template").innerHTML;if(a){a.addEventListener("submit",function(t){t.preventDefault();var n=new FormData(a);e(n,function(e){var t=document.querySelector("#popupSuccess");t.style.display="block";var n=t.querySelector(".js-closePopup");n.addEventListener("click",function(){n.parentNode.remove(),r.style.height="0"});var r=document.querySelector(".overlay");r.style.height="100%"})}),a.querySelector("#file").addEventListener("change",function(){for(var e=this.files,n=0;n<e.length;n++)t(e[n]);this.value=""});for(var f=document.querySelectorAll(".form-counter"),d=0;d<f.length;d++)r(f[d]);for(var h=document.querySelectorAll(".username__remove"),d=0;d<h.length;d++)h[d].addEventListener("click",o)}var m=document.querySelector(".main-nav__toggle");m.addEventListener("click",function(){document.querySelector(".main-nav").classList.toggle("main-nav--hide-block"),document.querySelector(".header__top-menu").classList.toggle("header__top-menu--cross"),this.classList.toggle("main-nav__toggle--close")})}}(),function(e,t){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e.Mustache={},t(Mustache))}(this,function(e){function t(e){return"function"==typeof e}function n(e){return m(e)?"array":typeof e}function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(e,t){return null!=e&&"object"==typeof e&&t in e}function i(e,t){return v.call(e,t)}function a(e){return!i(g,e)}function s(e){return String(e).replace(/[&<>"'\/]/g,function(e){return y[e]})}function c(t,n){function o(){if(g&&!y)for(;v.length;)delete h[v.pop()];else v=[];g=!1,y=!1}function i(e){if("string"==typeof e&&(e=e.split(S,2)),!m(e)||2!==e.length)throw new Error("Invalid tags: "+e);s=new RegExp(r(e[0])+"\\s*"),c=new RegExp("\\s*"+r(e[1])),f=new RegExp("\\s*"+r("}"+e[1]))}if(!t)return[];var s,c,f,d=[],h=[],v=[],g=!1,y=!1;i(n||e.tags);for(var b,E,L,x,T,M,U=new p(t);!U.eos();){if(b=U.pos,L=U.scanUntil(s))for(var C=0,A=L.length;A>C;++C)x=L.charAt(C),a(x)?v.push(h.length):y=!0,h.push(["text",x,b,b+1]),b+=1,"\n"===x&&o();if(!U.scan(s))break;if(g=!0,E=U.scan(q)||"name",U.scan(w),"="===E?(L=U.scanUntil(_),U.scan(_),U.scanUntil(c)):"{"===E?(L=U.scanUntil(f),U.scan(k),U.scanUntil(c),E="&"):L=U.scanUntil(c),!U.scan(c))throw new Error("Unclosed tag at "+U.pos);if(T=[E,L,b,U.pos],h.push(T),"#"===E||"^"===E)d.push(T);else if("/"===E){if(M=d.pop(),!M)throw new Error('Unopened section "'+L+'" at '+b);if(M[1]!==L)throw new Error('Unclosed section "'+M[1]+'" at '+b)}else"name"===E||"{"===E||"&"===E?y=!0:"="===E&&i(L)}if(M=d.pop())throw new Error('Unclosed section "'+M[1]+'" at '+U.pos);return l(u(h))}function u(e){for(var t,n,r=[],o=0,i=e.length;i>o;++o)t=e[o],t&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(r.push(t),n=t));return r}function l(e){for(var t,n,r=[],o=r,i=[],a=0,s=e.length;s>a;++a)switch(t=e[a],t[0]){case"#":case"^":o.push(t),i.push(t),o=t[4]=[];break;case"/":n=i.pop(),n[5]=t[2],o=i.length>0?i[i.length-1][4]:r;break;default:o.push(t)}return r}function p(e){this.string=e,this.tail=e,this.pos=0}function f(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function d(){this.cache={}}var h=Object.prototype.toString,m=Array.isArray||function(e){return"[object Array]"===h.call(e)},v=RegExp.prototype.test,g=/\S/,y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},w=/\s*/,S=/\s+/,_=/\s*=/,k=/\s*\}/,q=/#|\^|\/|>|\{|&|=|!/;p.prototype.eos=function(){return""===this.tail},p.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},p.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},f.prototype.push=function(e){return new f(e,this)},f.prototype.lookup=function(e){var n,r=this.cache;if(r.hasOwnProperty(e))n=r[e];else{for(var i,a,s=this,c=!1;s;){if(e.indexOf(".")>0)for(n=s.view,i=e.split("."),a=0;null!=n&&a<i.length;)a===i.length-1&&(c=o(n,i[a])),n=n[i[a++]];else n=s.view[e],c=o(s.view,e);if(c)break;s=s.parent}r[e]=n}return t(n)&&(n=n.call(this.view)),n},d.prototype.clearCache=function(){this.cache={}},d.prototype.parse=function(e,t){var n=this.cache,r=n[e];return null==r&&(r=n[e]=c(e,t)),r},d.prototype.render=function(e,t,n){var r=this.parse(e),o=t instanceof f?t:new f(t);return this.renderTokens(r,o,n,e)},d.prototype.renderTokens=function(e,t,n,r){for(var o,i,a,s="",c=0,u=e.length;u>c;++c)a=void 0,o=e[c],i=o[0],"#"===i?a=this.renderSection(o,t,n,r):"^"===i?a=this.renderInverted(o,t,n,r):">"===i?a=this.renderPartial(o,t,n,r):"&"===i?a=this.unescapedValue(o,t):"name"===i?a=this.escapedValue(o,t):"text"===i&&(a=this.rawValue(o)),void 0!==a&&(s+=a);return s},d.prototype.renderSection=function(e,n,r,o){function i(e){return a.render(e,n,r)}var a=this,s="",c=n.lookup(e[1]);if(c){if(m(c))for(var u=0,l=c.length;l>u;++u)s+=this.renderTokens(e[4],n.push(c[u]),r,o);else if("object"==typeof c||"string"==typeof c||"number"==typeof c)s+=this.renderTokens(e[4],n.push(c),r,o);else if(t(c)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");c=c.call(n.view,o.slice(e[3],e[5]),i),null!=c&&(s+=c)}else s+=this.renderTokens(e[4],n,r,o);return s}},d.prototype.renderInverted=function(e,t,n,r){var o=t.lookup(e[1]);return!o||m(o)&&0===o.length?this.renderTokens(e[4],t,n,r):void 0},d.prototype.renderPartial=function(e,n,r){if(r){var o=t(r)?r(e[1]):r[e[1]];return null!=o?this.renderTokens(this.parse(o),n,r,o):void 0}},d.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);return null!=n?n:void 0},d.prototype.escapedValue=function(t,n){var r=n.lookup(t[1]);return null!=r?e.escape(r):void 0},d.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.2.0",e.tags=["{{","}}"];var b=new d;e.clearCache=function(){return b.clearCache()},e.parse=function(e,t){return b.parse(e,t)},e.render=function(e,t,r){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+n(e)+'" was given as the first argument for mustache#render(template, view, partials)');return b.render(e,t,r)},e.to_html=function(n,r,o,i){var a=e.render(n,r,o);return t(i)?void i(a):a},e.escape=s,e.Scanner=p,e.Context=f,e.Writer=d});var myMap;